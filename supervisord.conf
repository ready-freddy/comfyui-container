[supervisord]
nodaemon=true
logfile=/workspace/supervisord.log
pidfile=/workspace/supervisord.pid

[program:bootstrap]
command=/usr/local/bin/startup.sh
priority=5
startsecs=0
autorestart=false
stdout_logfile=/workspace/bootstrap.log
stderr_logfile=/workspace/bootstrap.err

[program:code-server]
; Default password here; override at runtime via env PASSWORD in RunPod Template
environment=PASSWORD=change-me-please
command=/usr/bin/code-server --auth password --bind-addr 0.0.0.0:%(ENV_CODESERVER_PORT)s /workspace
directory=/workspace
autostart=true
autorestart=true
stdout_logfile=/workspace/code-server.log
stderr_logfile=/workspace/code-server.err

[program:comfyui]
command=/workspace/.venvs/comfyui-perf/bin/python /workspace/ComfyUI/main.py --listen 0.0.0.0 --port %(ENV_COMFY_PORT)s --enable-cors-header "*"
directory=/workspace/ComfyUI
autostart=true
autorestart=true
stdout_logfile=/workspace/comfyui.log
stderr_logfile=/workspace/comfyui.err
startretries=999
